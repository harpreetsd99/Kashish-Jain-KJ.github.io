<!DOCTYPE html>
<html>
<head>
	<title>Post Product</title>
	<meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1.0"/>
	<link rel="icon" type="image" href="img/adminpost.png">
	<link rel="stylesheet" type="text/css" href="adminpost.css">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
	<script src="https://code.jquery.com/jquery-3.5.1.min.js"integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="crossorigin="anonymous"></script>

</head>
<body>
	<main class="main" style="display: block;">
		<div class="form">
			<h3 class="title center orange-text">ADD YOUR PRODUCT<hr width="100px"></h3>
			<div class="row">
	   			<form class="col s12">
	   				<div class="row">
	   					<div class="input-field col s12 m3">
						    <select id="select" required>
						      <option value="" disabled selected>Choose</option>
						      <option value="1">Fruits</option>
						      <option value="2">Veggies</option>
						      <option value="3">Others</option>
						    </select>
						    <label for="select">Select Category</label>
						</div>
	   					<div class="input-field col s12 m3">
				            <input id="product" placeholder="Product Name" type="text" class="validate" required>
						    <label for="product">Product Name</label>
				        </div>
				        <div class="input-field col s4 m2">
	        				<input placeholder="Qty" id="qty" type="text" class="validate" required>
	          				<label for="qty">Quantity</label>
	        			</div>
	        			<div class="input-field col s4 m2">
	        				<input placeholder="kg/gm" id="unit" type="text" class="validate" required>
	          				<label for="unit">Unit</label>
	        			</div>
	        			<div class="input-field col s4 m2">
	        				<input id="price" placeholder="Rupees" type="text" class="validate" required>
	          				<label for="price">Price</label>
	        			</div>
	        		</div>
	        		<div class="row">
	        			<div class="input-field col s12 m4">
					        <div class="file-field input-field" style="margin:0px;padding :0px;">
						    	<div class="btn">
						        	<span>Image</span>
						        	<input type="file" id="files" onchange="readURL(this);">
						      	</div>
						      	<div class="file-path-wrapper">
						        	<input class="file-path validate" type="text" placeholder="IMG" required>
						      	</div>
						    </div>
						</div>
						<div class="input-field col s6 m5">
							<textarea id="textarea1" class="materialize-textarea" required></textarea>
							<label for="textarea1">Description</label>
						</div>
						<div class="input-field col s6 m3">
	        				<input id="checkpoint" placeholder="No. Of Checkpoints" type="number" class="validate" min="0" required>
	          				<label for="checkpoint">Check-Points</label>
	        			</div>
					</div>
					 <script type="text/javascript">
					 	$( document ).ready(function(){

						 	$("#checkpoint").on("input",function(){
						 		if( $("#checkpoint").val() > 0 ){
						 			$(".checkpoints1").show("slow");
						 			$(".checkpoints2").show("slow");
						 			$(".checkpoints3").show("slow");
						 			$(".checkpoints4").show("slow");
						 			$(".checkpoints5").show("slow");
						 			$(".form").css("height","auto");
						 		}else if( $("#checkpoint").val() == 0 ){
						 			$(".checkpoints1").hide("fast");
						 			$(".checkpoints2").hide("fast");
						 			$(".checkpoints3").hide("fast");
						 			$(".checkpoints4").hide("fast");
						 			$(".checkpoints5").hide("fast");
						 			$(".form").css("height","auto");
						 		}
						 	});

						});
					</script>
<!----------------------------------Checkpoints(5 Hard-Coded)---------------------------->
	        		<div class="row">
	        			<div class="checkpoints1" style="display: none;">
		        			<h6 class="center">Check-Point 1<hr width="50px"></h6><br>
		        			<div class="input-field col s6 m3 offset-m2">
		        				<input placeholder="Qty Required" id="qty-req1" type="text" class="validate">
		          				<label for="qty-req1">Quantity-1</label>
		        			</div>
		        			<div class="input-field col s6 m3 offset-m2">
		        				<input id="price-point1" placeholder="Price After Point" type="text" class="validate">
		          				<label for="price-point1">Price-1</label>
		        			</div>
		        		</div>
	        		</div>
	        		<div class="row">
	        			<div class="checkpoints2" style="display: none;">
		        			<h6 class="center">Check-Point 2<hr width="50px"></h6><br>
		        			<div class="input-field col s6 m3 offset-m2">
		        				<input placeholder="Qty Required" id="qty-req2" type="text" class="validate">
		          				<label for="qty-req2">Quantity-2</label>
		        			</div>
		        			<div class="input-field col s6 m3 offset-m2">
		        				<input id="price-point2" placeholder="Price After Point" type="text" class="validate">
		          				<label for="price-point2">Price-2</label>
		        			</div>
		        		</div>
	        		</div>
	        		<div class="row">
	        			<div class="checkpoints3" style="display: none;">
		        			<h6 class="center">Check-Point 2<hr width="50px"></h6><br>
		        			<div class="input-field col s6 m3 offset-m2">
		        				<input placeholder="Qty Required" id="qty-req3" type="text" class="validate">
		          				<label for="qty-req3">Quantity-3</label>
		        			</div>
		        			<div class="input-field col s6 m3 offset-m2">
		        				<input id="price-point3" placeholder="Price After Point" type="text" class="validate">
		          				<label for="price-point3">Price-3</label>
		        			</div>
		        		</div>
	        		</div>
	        		<div class="row">
	        			<div class="checkpoints4" style="display: none;">
		        			<h6 class="center">Check-Point 4<hr width="50px"></h6><br>
		        			<div class="input-field col s6 m3 offset-m2">
		        				<input placeholder="Qty Required" id="qty-req4" type="text" class="validate">
		          				<label for="qty-req4">Quantity-4</label>
		        			</div>
		        			<div class="input-field col s6 m3 offset-m2">
		        				<input id="price-point4" placeholder="Price After Point" type="text" class="validate">
		          				<label for="price-point4">Price-4</label>
		        			</div>
		        		</div>
	        		</div>
	        		<div class="row">
	        			<div class="checkpoints2" style="display: none;">
		        			<h6 class="center">Check-Point 5<hr width="50px"></h6><br>
		        			<div class="input-field col s6 m3 offset-m2">
		        				<input placeholder="Qty Required" id="qty-req5" type="text" class="validate">
		          				<label for="qty-req5">Quantity-5</label>
		        			</div>
		        			<div class="input-field col s6 m3 offset-m2">
		        				<input id="price-point5" placeholder="Price After Point" type="text" class="validate">
		          				<label for="price-point5">Price-5</label>
		        			</div>
		        		</div>
	        		</div>
<!-----------------------------------------Checkpoints-End------------------------------>
	        		<div class="row">
	        			<div class="center">
							<button id="back" class="btn-large waves-effect waves-light  orange darken-1" style="margin-right: 10px;border-radius: 10px;">Back</button>
							<button id="preview" class="btn-large waves-effect waves-light  orange darken-1" type="submit" style="margin-left: 10px;border-radius: 10px;">Preview</button>
						</div><br>
	        		</div>
	        		<script type="text/javascript">
					 	$( document ).ready(function(){
						 	$("#preview").on("click",function(e){
						 		e.preventDefault();
						 		$(".main").hide();
						 		$(".preview").show();
						 		$("body").css("background-color","#f4f4f4");
						 	});
						});
						$( document ).ready(function(){
						 	$("#back").on("click",function(e){
						 		window.location.href = "Dashboard.html";
						 	});
						});
					 </script>
	        	</form>
	        </div>	
	    </div>
	</main>
	<!---------------------------------------Preview-------------------------------------->
	<div class="preview" style="display: none;">
		<div class="form orange-text text-lightn-3">
			<h3 class="title center">Preview<hr width="100px"></h3>
			<div class="row">
	   			<form class="col s12">
	   				<div class="row">
	   					<div class="input-field col s12 m3">
						    <input id="select2" placeholder="Category" type="text" readonly>
						    <label for="select">Category</label>
						    <script type="text/javascript">
						    $( document ).ready(function(){
						    		$("#select").change(function(){
						    		  var item = $("#select option:selected").text();
									  $("#select2").val(item);
									});
						    	});
						    </script>
						</div>
	   					<div class="input-field col s12 m3">
				            <input id="product2" placeholder="Product Name" type="text" readonly>
				            <label for="product">Product</label>
						    <script type="text/javascript">
						    	$( document ).ready(function(){
						    		$("#product").keyup(function(){
									  $("#product2").val($(this).val());
									});
						    	});
						    </script>
				        </div>
				        <div class="input-field col s4 m2">
	        				<input id="qty2" placeholder="Qty" type="text" readonly>
	          				<label for="qty">Quantity</label>
	          				<script type="text/javascript">
						    	$( document ).ready(function(){
						    		$("#qty").keyup(function(){
									  $("#qty2").val($(this).val());
									});
						    	});
						    </script>
	        			</div>
	        			<div class="input-field col s4 m2">
	        				<input id="unit2" placeholder="Unit" type="text" readonly>
	          				<label for="unit">Unit</label>
	          				<script type="text/javascript">
						    	$( document ).ready(function(){
						    		$("#unit").keyup(function(){
									  $("#unit2").val($(this).val());
									});
						    	});
						    </script>
	        			</div>
	        			<div class="input-field col s4 m2">
	        				<input id="price2" placeholder="Price" type="text" readonly>
	          				<label for="price">Price</label>
	          				<script type="text/javascript">
						    	$( document ).ready(function(){
						    		$("#price").keyup(function(){
									  $("#price2").val($(this).val());
									});
						    	});
						    </script>
	        			</div>
	        		</div>
	        		<div class="row">
	        			<div class="input-field col s2 m1">
	        				<img id="img" src="#" alt="IMG" style="padding:0px 1px 5px 0px;"/>
						</div>
						<script type="text/javascript">
                                    function readURL(input) {
                                            if (input.files && input.files[0]) {
                                                var reader = new FileReader();

                                                reader.onload = function (e) {
                                                    $('#img')
                                                        .attr('src', e.target.result)
                                                        .width(45)
                                                        .height(45);
                                                };

                                                reader.readAsDataURL(input.files[0]);
                                            }
                                        }
                                </script>
	        			<div class="input-field col s5 m3">
					    	<input id="img2" placeholder="Image" type="text" readonly>
	          				<label for="img">Image</label>
						</div>
						<script type="text/javascript">
                                $( document ).ready(function(){
                                    $("#files").change(function(){
                                      $("#img2").val($(this).val());
                                    });
                                });
                        </script>
                        <div class="input-field col s5 m3">
	        				<input id="checkpoint2" placeholder="Checkpoint" type="number" readonly>
	          				<label for="checkpoint">Check-Points</label>
	          				<script type="text/javascript">
						    	$( document ).ready(function(){
						    		$("#checkpoint").keyup(function(){
									  $("#checkpoint2").val($(this).val());
									});
						    	});
						    </script>
	        			</div>
						<div class="input-field col s12 m5">
							<textarea id="textarea2" class="materialize-textarea" placeholder="Description" readonly></textarea>
							<label for="textarea2">Description</label>
							<script type="text/javascript">
						    	$( document ).ready(function(){
						    		$("#textarea1").keyup(function(){
									  $("#textarea2").val($(this).val());
									});
						    	});
						    </script>
						</div>
					</div>
					<!-------------------Preview-Checkpoints------------------->
	        		<div class="row">
	        			<div class="checkpoints1" style="display: none;">
		        			<h6 class="center">Check-Point-1<hr width="50px"></h6><br>
		        			<div class="input-field col s6 m3 offset-m2">
		        				<input id="qty-req-1" type="text" placeholder="Qty-Req" readonly>
		          				<label for="qty-req-1">Quantity Req.</label>
		          				<script type="text/javascript">
						    	$( document ).ready(function(){
						    		$("#qty-req1").keyup(function(){
									  $("#qty-req-1").val($(this).val());
									});
						    	});
						    	</script>
		        			</div>
		        			<div class="input-field col s6 m3 offset-m2">
		        				<input id="price-point-1" type="text" placeholder="Price" readonly>
		          				<label for="price-point-1">Price After Point</label>
		          				<script type="text/javascript">
						    	$( document ).ready(function(){
						    		$("#price-point1").keyup(function(){
									  $("#price-point-1").val($(this).val());
									});
						    	});
						    	</script>
		        			</div>
		        		</div>
	        		</div>
	        		<div class="row">
	        			<div class="checkpoints2" style="display: none;">
		        			<h6 class="center">Check-Point-2<hr width="50px"></h6><br>
		        			<div class="input-field col s6 m3 offset-m2">
		        				<input id="qty-req-2" type="text" placeholder="Qty-Req" readonly>
		          				<label for="qty-req-2">Quantity Req.</label>
		          				<script type="text/javascript">
						    	$( document ).ready(function(){
						    		$("#qty-req2").keyup(function(){
									  $("#qty-req-2").val($(this).val());
									});
						    	});
						    	</script>
		        			</div>
		        			<div class="input-field col s6 m3 offset-m2">
		        				<input id="price-point-2" type="text" placeholder="Price" readonly>
		          				<label for="price-point-2">Price After Point</label>
		          				<script type="text/javascript">
						    	$( document ).ready(function(){
						    		$("#price-point2").keyup(function(){
									  $("#price-point-2").val($(this).val());
									});
						    	});
						    	</script>
		        			</div>
		        		</div>
	        		</div>
	        		<div class="row">
	        			<div class="checkpoints3" style="display: none;">
		        			<h6 class="center">Check-Point-3<hr width="50px"></h6><br>
		        			<div class="input-field col s6 m3 offset-m2">
		        				<input id="qty-req-3" type="text" placeholder="Qty-Req" readonly>
		          				<label for="qty-req-3">Quantity Req.</label>
		          				<script type="text/javascript">
						    	$( document ).ready(function(){
						    		$("#qty-req3").keyup(function(){
									  $("#qty-req-3").val($(this).val());
									});
						    	});
						    	</script>
		        			</div>
		        			<div class="input-field col s6 m3 offset-m2">
		        				<input id="price-point-3" type="text" placeholder="Price" readonly>
		          				<label for="price-point-3">Price After Point</label>
		          				<script type="text/javascript">
						    	$( document ).ready(function(){
						    		$("#price-point3").keyup(function(){
									  $("#price-point-3").val($(this).val());
									});
						    	});
						    	</script>
		        			</div>
		        		</div>
	        		</div>	        		
	        		<div class="row">
	        			<div class="checkpoints4" style="display: none;">
		        			<h6 class="center">Check-Point-4<hr width="50px"></h6><br>
		        			<div class="input-field col s6 m3 offset-m2">
		        				<input id="qty-req-4" type="text" placeholder="Qty-Req" readonly>
		          				<label for="qty-req-4">Quantity Req.</label>
		          				<script type="text/javascript">
						    	$( document ).ready(function(){
						    		$("#qty-req4").keyup(function(){
									  $("#qty-req-4").val($(this).val());
									});
						    	});
						    	</script>
		        			</div>
		        			<div class="input-field col s6 m3 offset-m2">
		        				<input id="price-point-4" type="text" placeholder="Price" readonly>
		          				<label for="price-point-4">Price After Point</label>
		          				<script type="text/javascript">
						    	$( document ).ready(function(){
						    		$("#price-point4").keyup(function(){
									  $("#price-point-4").val($(this).val());
									});
						    	});
						    	</script>
		        			</div>
		        		</div>
	        		</div>
	        		<div class="row">
	        			<div class="checkpoints5" style="display: none;">
		        			<h6 class="center">Check-Point-5<hr width="50px"></h6><br>
		        			<div class="input-field col s6 m3 offset-m2">
		        				<input id="qty-req-5" type="text" placeholder="Qty-Req" readonly>
		          				<label for="qty-req-5">Quantity Req.</label>
		          				<script type="text/javascript">
						    	$( document ).ready(function(){
						    		$("#qty-req5").keyup(function(){
									  $("#qty-req-5").val($(this).val());
									});
						    	});
						    	</script>
		        			</div>
		        			<div class="input-field col s6 m3 offset-m2">
		        				<input id="price-point-5" type="text" placeholder="Price" readonly>
		          				<label for="price-point-5">Price After Point</label>
		          				<script type="text/javascript">
						    	$( document ).ready(function(){
						    		$("#price-point5").keyup(function(){
									  $("#price-point-5").val($(this).val());
									});
						    	});
						    	</script>
		        			</div>
		        		</div>
	        		</div>
	        		<!-------------------Preview-Checkpoints-End----------------->
	        		<div class="row">
	        			<div class="center">
							<button id="edit" class="btn-large waves-effect waves-light orange darken-1" style="border-radius: 10px;">Edit</button>
							<button id="proceed" class="btn-large waves-effect waves-light  orange darken-1" type="submit" style="margin-left: 10px;border-radius: 10px;">Submit</button>
						</div><br>
	        		</div>
	        		<script type="text/javascript">
					 	$( document ).ready(function(){
						 	$("#edit").on("click",function(e){
						 		e.preventDefault();
						 		$(".main").show();
						 		$(".preview").hide();
								$("body").css("background-color","#f4e4a9");
							
								 
						 	});
						});
						$( document ).ready(function(){
						 	$("#proceed").on("click",function(e){
								e.preventDefault();
								const db = firebase.firestore();

								var storageRef = firebase.storage().ref();
								
								var file = document.querySelector("#files").files[0];
								const name = file.name;
								var mountainsRef = storageRef.child(name);
								var metadata = {
									contentType: file.type
								}
								var uploadTask = storageRef.child('images/' + name).put(file, metadata);
								
								
								
								
								var Pname = document.getElementById("product2").value;	
							
    							

								db.collection("Products").doc(Pname).set({
        							Product_Name: document.getElementById("product2").value,
        							Product_Category:  document.getElementById("select2").value,
        							Product_Discription: document.getElementById("textarea2").value,
        							Product_Quantity:  document.getElementById("qty2").value,
									Product_Unit: document.getElementById("unit2").value,
									Product_Img: name,
        							Product_Price: document.getElementById("price2").value,
									No_Of_CheckPoints: document.getElementById("checkpoint2").value,
									CheckPointQuantity1: document.getElementById("qty-req-1").value,
									CheckPointPrice1: document.getElementById("price-point-1").value,
									CheckPointQuantity2: document.getElementById("qty-req-2").value,
									CheckPointPrice2: document.getElementById("price-point-2").value,
									CheckPointQuantity3: document.getElementById("qty-req-3").value,
									CheckPointPrice3: document.getElementById("price-point-3").value,
									CheckPointQuantity4: document.getElementById("qty-req-4").value,
									CheckPointPrice4: document.getElementById("price-point-4").value,
									CheckPointQuantity5: document.getElementById("qty-req-5").value,
									CheckPointPrice5: document.getElementById("price-point-5").value


    							})
    							.then(function() {
									alert("Document successfully written!");
									$(".main").show();
						 			$(".preview").hide();
									$("body").css("background-color","#f4e4a9");
									window.location.href = "Dashboard.html"
									
    							})
    							.catch(function(error) {
        							alert("Error writing document: ");
								
								});

								
								
						
								
						 		
								
								 
						 	});
						});
					 </script>
	        	</form>
	        </div>	
	    </div>
	</main>

	<script>
		$( document ).ready(function(){

    		$('select').formSelect();

		    M.updateTextFields();

			$('#textarea1').val();
  			M.textareaAutoResize($('#textarea1'));

    		$('.datepicker').datepicker();

  		});	
	</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
	<!-- The core Firebase JS SDK is always required and must be listed first -->
	<script src="https://www.gstatic.com/firebasejs/7.15.1/firebase-app.js"></script>
	<script src="https://www.gstatic.com/firebasejs/7.15.1/firebase-auth.js"></script>
	<script src="https://www.gstatic.com/firebasejs/7.15.1/firebase-firestore.js"></script>
	<script src="https://www.gstatic.com/firebasejs/7.15.1/firebase-storage.js"></script>
   
	<!-- TODO: Add SDKs for Firebase products that you want to use
		https://firebase.google.com/docs/web/setup#available-libraries -->
	<script src="https://www.gstatic.com/firebasejs/7.15.1/firebase-analytics.js"></script>
   
	<script>
	// Your web app's Firebase configuration
	var firebaseConfig = {
		apiKey: "AIzaSyBNuyR1kYlUE47dRdvSwH_ktun0aJdmnIw",
		authDomain: "codellion-project.firebaseapp.com",
		databaseURL: "https://codellion-project.firebaseio.com",
		projectId: "codellion-project",
		storageBucket: "codellion-project.appspot.com",
		messagingSenderId: "115691137424",
		appId: "1:115691137424:web:6512ab76b92862f9302b15",
		measurementId: "G-QDVW8S0KLN"
	};
	// Initialize Firebase
	firebase.initializeApp(firebaseConfig);
	firebase.analytics();
	</script>
	

	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script> 
</body>
</html>